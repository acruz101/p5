{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>4.9 Prototype</title>

    <link rel="stylesheet" type="text/css" href="{% static 'draw/vendor/bootstrap/css/bootstrap.min.css' %}">
    <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>

    <style type="text/css">
    </style>

</head>
<body>
    <!-- You may change the dimensions of this canvas -->
    <canvas id="canvas" width="1000px" height="1000px"></canvas>
    <input id="refresh" type="button" value="refresh">
</body>
<script>


  function init() {


    /*
    // Get mouse position
    function getMousePos(c, evt) {
        var rect = c.getBoundingClientRect();
        return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
        };
    };

    // Write mouse position
    function writeMessage(c, m) {
        var context = c.getContext('2d');
        context.clearRect(0, 0, c.width, c.height);
        context.font = '18pt Calibri';
        context.fillStyle = 'black';
        context.fillText(m, 10, 25);
    };

    // Make circle
    function makeCircle(context, x, y, color, circleSize) {
        context.beginPath();
        context.arc(x, y, circleSize, 0, Math.PI * 2, true);
        context.fillStyle = color;
        context.fill();
        context.closePath();
    };

    var c = document.getElementById('canvas');
    c.width = window.innerWidth;
    c.height = window.innerHeight;
    var context = c.getContext('2d');
    var elements = [];

    for(i=0; i<20; i++) {
      var x1 = Math.floor(Math.random()*1000);
      var y1 = Math.floor(Math.random()*1000);

      elements.push({
          color: '#05EFFF',
          circleSize: 50,
          x: x1,
          y: y1,
          clicked: function() {
              context.fillStyle = 'black';
              context.fill();
          }
      });
    }


    elements.forEach(function(element) {
        var circle = new makeCircle(context, element.x, element.y, element.color, element.circleSize);
        console.log(circle);
    });


    canvas.addEventListener('click', function(e) {
        var x = e.pageX - c.offsetLeft;
        var y = e.pageY - c.offsetTop;

        elements.forEach(function(element){
            if(Math.pow(x-element.x,2) + Math.pow(y-element.y,2) < Math.pow(element.circleSize,2)) {
               element.clicked();
            }
        });
    });
    */


    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    ctx.canvas.width  = window.innerWidth;
    ctx.canvas.height = window.innerHeight;

    var button = document.getElementById("refresh");
    const redCoords = [];
    const redCircles = [];

    //function makeRedCircle() {
    redCircle = function() {
      //for(i=0; i<20; i++) {
        var x = Math.floor(Math.random()*1000);
        var y = Math.floor(Math.random()*1000);
        var radius = Math.floor(20);

        redCoords.push([x, y]);

        var r = Math.floor(Math.random()*255);
        var g = Math.floor(Math.random()*255);
        var b = Math.floor(Math.random()*255);

        ctx.beginPath();
        ctx.arc(x,y,radius,Math.PI*2,0,false);
        ctx.fillStyle = 'red';
        ctx.fill();
        ctx.closePath();
        this.clicked=function(){
          ctx.fillStyle='black';
          ctx.fill();
        }
      //}
    }

    function makeWhiteCircle(x, y, radius) {
      ctx.beginPath();
      ctx.arc(x, y, radius, Math.PI*2,0,false);
      ctx.fillStyle = 'white';
      ctx.fill();
      ctx.closePath();
    }

    var uid = Date.now() % 10000;
    var color1 = "#" + Math.floor(Math.random()*1000).toString(16);
    var color2 = "#" + Math.floor(Math.random()*1000).toString(16);
    var color3 = "#" + Math.floor(Math.random()*1000).toString(16);
    var myColors = [color1, color2, color3];

    ctx.clearRect(0,0,1000,1000);

    for(i=0; i<20; i++) {
      var newRedCircle = new redCircle();
      redCircles.push(newRedCircle);
    }

    console.log(redCoords);

    //MAKES REGULAR NONCLICKABLE BUTTONS
    for(i=0; i<100; i++) {
      const randomColor = myColors[Math.floor(Math.random() * myColors.length)];

      var x = Math.floor(Math.random()*1000);
      var y = Math.floor(Math.random()*1000);
      var radius = Math.floor(20);

      var r = Math.floor(Math.random()*255);
      var g = Math.floor(Math.random()*255);
      var b = Math.floor(Math.random()*255);

      ctx.beginPath();
      ctx.arc(x,y,radius,Math.PI*2,0,false);
      ctx.fillStyle = randomColor;
      ctx.fill();
      ctx.closePath();
    }

    $('#canvas').click(function(e){
      var x = e.clientX;
      var y = e.clientY;

      console.log('x,y ' + x + ' ' + y);

      for (i = 0; i < redCoords.length; i++) {
        if(Math.pow(x - redCoords[i][0],2) + Math.pow(y - redCoords[i][1],2) < Math.pow(20,2)) {
          //redCircles[i].clicked();
          makeWhiteCircle(redCoords[i][0], redCoords[i][1], 20);
          console.log('clicked ' + x + ' ' + y);
        }
      }
    });

  }






  /*
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
  var button = document.getElementById("refresh");

  var uid = Date.now() % 10000;
  var color1 = "#" + Math.floor(Math.random()*1000).toString(16);
  var color2 = "#" + Math.floor(Math.random()*1000).toString(16);
  var color3 = "#" + Math.floor(Math.random()*1000).toString(16);
  var myColors = [color1, color2, color3];

  var refresh = function() {

    ctx.clearRect(0,0,1000,1000);

    for(i=0; i<100; i++) {
      const randomColor = myColors[Math.floor(Math.random() * myColors.length)];

      var x = Math.floor(Math.random()*1000);
      var y = Math.floor(Math.random()*1000);
      var radius = Math.floor(20);

      var r = Math.floor(Math.random()*255);
      var g = Math.floor(Math.random()*255);
      var b = Math.floor(Math.random()*255);

      ctx.beginPath();
      ctx.arc(x,y,radius,Math.PI*2,0,false);
      ctx.fillStyle = randomColor;
      ctx.fill();
      ctx.addHitRegion({id: 'button'});
      ctx.closePath;


    }
  }
  refresh();
  button.addEventListener("click", refresh, false);

  */

  $(document).ready(function() {
    init();
  });



</script>
</html>
